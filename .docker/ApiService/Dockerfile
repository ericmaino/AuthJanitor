FROM mcr.microsoft.com/azure-functions/dotnet:3.0
ARG ENVIRONMENT=
ARG STORAGE_WEB_URL=
ARG SENDGRID_API_KEY=
ARG CLIENT_ID=
ARG CLIENT_SECRET=
ARG TENANT_ID=

ENV Host--CORS=*
ENV FUNCTIONS_WORKER_RUNTIME=dotnet
ENV AzureWebJobsScriptRoot=/home/site/wwwroot
ENV AZURE_FUNCTION_PROXY_DISABLE_LOCAL_CALL=True
ENV AzureWebJobsStorage=http://localhost
ENV STORAGE_WEB_URL=$STORAGE_WEB_URL
ENV SENDGRID_API_KEY=$SENDGRID_API_KEY
ENV CLIENT_ID=$CLIENT_ID
ENV CLIENT_SECRET=$CLIENT_SECRET
ENV TENANT_ID=TENANT_ID
COPY /bin/$ENVIRONMENT/publish /home/site/wwwroot